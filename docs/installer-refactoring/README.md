# インストーラリファクタリングドキュメント

## 概要

Evolution CMSのインストーラ（`install/`ディレクトリ）を段階的にリファクタリングし、セキュリティとUXを改善するプロジェクトです。

## 背景

現在のインストーラは以下の問題を抱えています：

1. **セキュリティ**: 誰でもアップグレードを実行できる、MD5パスワードハッシュ、CSRF保護なし
2. **保守性**: グローバル変数の多用、責任の分離不足、テスト困難
3. **構造**: 手続き型コード、名前空間なし、長大な関数
4. **UX**: エラーメッセージが不親切、進捗が見えない

## ドキュメント

1. [**概要**](./00-overview.md) - プロジェクト全体の概要と問題点
2. [**リファクタリング計画**](./01-refactoring-plan.md) - 10フェーズの段階的実装計画
3. [**セキュリティ改善**](./02-security-improvements.md) - セキュリティ強化の詳細
4. [**ディレクトリ構造**](./03-directory-structure.md) - 新しい構造とコーディング規約
5. [**関数の整理計画**](./04-function-organization.md) - 散在する関数のクラス化計画
6. [**モダンDB抽象化**](./05-query-builder-design.md) - モダンなDB抽象化レイヤー設計
7. [**モダンPHPアーキテクチャ**](./06-modern-php-architecture.md) - 包括的なモダンPHP構成

## 優先実装項目

### Phase 1（現在）

- [x] ドキュメント作成
- [x] 基礎ディレクトリ構造の作成
- [x] オートローダーの実装
- [ ] 基本クラスの作成（Application, Container, Config）

### 高優先度（セキュリティ）

1. **アップグレード時の認証** - Phase 3で実装
2. **CSRF保護** - Phase 5で実装
3. **パスワードハッシュphpass移行** - Phase 2で実装
4. **SQLインジェクション対策強化** - Phase 2で実装

## スケジュール

全体で10-15週を想定。各Phaseごとにプルリクエストを作成し、レビュー・マージを繰り返します。

## 貢献

このリファクタリングプロジェクトへの貢献を歓迎します：

- **レビュー**: 設計やアーキテクチャのフィードバック
- **実装**: 各Phaseの実装支援
- **テスト**: テストケースの作成
- **ドキュメント**: ドキュメントの改善

## ライセンス

Evolution CMS本体と同じライセンス（GPL）に従います。

## 関連リンク

- [Evolution CMS公式サイト](https://github.com/evolution-cms/evolution)
