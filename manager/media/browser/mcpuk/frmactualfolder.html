<!--
 * FCKeditor - The text editor for internet
 * Copyright (C) 2003-2005 Frederico Caldeira Knabben
 * 
 * Licensed under the terms of the GNU Lesser General Public License:
 * 		http://www.opensource.org/licenses/lgpl-license.php
 * 
 * For further information visit:
 * 		http://www.fckeditor.net/
 * 
 * File Name: frmactualfolder.html
 * 	This page shows the actual folder path.
 * 
 * File Authors:
 * 		Frederico Caldeira Knabben (fredck@fckeditor.net)
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <link href="browser.css" type="text/css" rel="stylesheet">
    <script type="text/javascript">
        function buildBreadcrumb(resourceType, folderPath) {
            var pathEl = document.getElementById('tdName');

            if (!pathEl) {
                return;
            }

            while (pathEl.firstChild) {
                pathEl.removeChild(pathEl.firstChild);
            }

            var foldersFrame = window.parent.frames['frmFolders'];
            var parts = folderPath.split('/').filter(function (segment) {
                return segment.length;
            });
            var currentPath = '/';

            var appendSeparator = function (target) {
                var separator = document.createElement('span');
                separator.className = 'BrowserPathSeparator';
                separator.appendChild(document.createTextNode('/'));
                target.appendChild(separator);
            };

            var createLink = function (label, path) {
                var link = document.createElement('a');
                link.href = '#';
                link.className = 'BrowserPathLink';
                link.appendChild(document.createTextNode(label));
                link.onclick = function (event) {
                    if (event && event.preventDefault) {
                        event.preventDefault();
                    }

                    if (foldersFrame && typeof foldersFrame.OpenFolder === 'function') {
                        foldersFrame.OpenFolder(path);
                    }

                    return false;
                };

                return link;
            };

            var createCurrent = function (label) {
                var current = document.createElement('span');
                current.className = 'BrowserPathCurrent';
                current.setAttribute('aria-current', 'page');
                current.appendChild(document.createTextNode(label));

                return current;
            };

            if (!parts.length) {
                pathEl.appendChild(createCurrent(getResourceTypeLabel(resourceType)));

                return;
            }

            pathEl.appendChild(createLink(getResourceTypeLabel(resourceType), '/'));

            parts.forEach(function (part, index) {
                var pathForLink = currentPath + part + '/';
                var isLast = index === parts.length - 1;

                currentPath = pathForLink;

                appendSeparator(pathEl);
                pathEl.appendChild(isLast ? createCurrent(part) : createLink(part, pathForLink));
            });
        }

        function SetCurrentFolder(resourceType, folderPath) {
            buildBreadcrumb(resourceType, folderPath);
        }

        function getResourceTypeLabel(resourceType) {
            if (resourceType === 'files') {
                return 'Files';
            }

            if (resourceType === 'media') {
                return 'Media';
            }

            return 'Images';
        }

        window.onload = function () {
            window.top.IsLoadedActualFolder = true;
        }

    </script>
</head>
<body class="mcpuk-browser BrowserBody BrowserBody--actual-folder" bottomMargin="0" topMargin="0">
<div class="BrowserPathContainer">
    <div class="BrowserPathBar" role="presentation">
        <span id="tdName" class="ActualFolder BrowserPathText">/</span>
    </div>
</div>
</body>
</html>
