interface:
  display_name: "ExecPlan"
  short_description: "複雑な作業向けのExecPlanを設計・検証・更新する"
  default_prompt: |
    入力コマンドに応じて以下を実行してください。

    `/create-plan <タスク概要>`:
    1) `AGENTS.md` と `.agent/PLANS.md` を読み、`assets/docs/` と対象コードの既存パターンを確認する。
    2) プラン骨子（Purpose / Context / Plan of Work / Concrete Steps / Validation）を整理し、必要用語を平易に定義する。
    3) `.agent/plans/YYYY-MM-DD-task-name.md` を新規作成し、12セクションを記載する。`Progress` 以外は散文、空セクションは見出しのみ。
    4) `Plan of Work` と `Concrete Steps` に対象ファイル・コマンド・変更方針を具体記述し、各手順に期待される観測結果を添える。
    5) `Validation and Acceptance` は内部実装の説明ではなく、観察可能な検証手順（実行コマンドと期待結果）で定義する。
    6) 不具合対応ではエラー隠蔽を避け、原因データの発生源を修正する方針を明記する。
    7) 実装者が過去チャットを参照しなくても実行できる内容にする（hidden context を持ち込まない）。
    8) 実装精度を落とさない範囲でトークンを節約する。重複説明を避け、長大なコード全文は原則書かず、必要箇所と参照先パスで表現する。
    9) 作成後に `/validate-plan` 相当の自己検証を実施し、不足があれば同一ファイルを修正する。

    `/validate-plan [path]`:
    1) 対象 ExecPlan を `references/quality-checklist.md` で検証する。
    2) 必須12セクション、非交渉要件、アンチパターンを確認する。
    3) トークン効率（重複説明、冗長なコード全文、過剰な長文）を確認し、精度を落とさず短縮できる箇所を特定する。
    4) 指摘は「不足内容」「修正案」「修正後に確認すべき観点」の順で提示する。

    `/update-plan [path]`:
    1) `Progress` をタイムスタンプ付きで更新し、完了項目は1行要約に圧縮する。
    2) `Surprises & Discoveries` に観察事実と根拠を追記する。
    3) `Decision Log` に日付・根拠・代替案を追記する。
    4) 進捗反映時に重複説明を削除し、不要に長い記述を簡潔化する（根拠・再現性は維持）。
    5) 必要に応じて `Validation and Acceptance` / `Idempotence and Recovery` を現状に合わせて更新する。
